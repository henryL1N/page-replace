# 页面置换算法模拟实验

学生姓名：林庆华

学号：201707352013001

年级：2017春

专业：计算机科学与技术

层次：大专起点本科

## 实验背景

内存通常容量有限，但有的作业很大，其所要求的内存空间超过了内存总容量，作业不能全部被装入内存， 致使该作业无法运行；或者，有大量作业要求运行，但由于内存容量不足以容纳所有这些作业，只能将少数作业 装入内存让它们先运行，而将其它大量的作业留在外存上等待。

出现上述两种情况的原因，都是由于内存容量不够大。一个显而易见的解决方法，是 从物理上增加内存容量，但这往往会受到机器自身的限制，而且无疑要增加系统成本，因 此这种方法是受到一定限制的。另一种方法是从逻辑上扩充内存容量，这正是虚拟存储技术所要解决的主要问题。

虚拟存储器的实现主要包括分页请求系统和请求分段系统。

请求分页系统是建立在基本分页基础上的，为了能支持虚拟存储器功能而增加了请求调页功能和页面置换功能。相应地，每次调入和换出的基本单位都是长度固定的页面，这使得请求分页系统在实现上要比请求分段系统简单(后者在换进和换出时是可变长度的段)。因此，请求分页便成为目前最常用的一种实现虚拟存储器的方式。

在进程运行过程中，若其所要访问的页面不在内存而需把它们调入内存，但内存已无空闲空间时，为了保证该进程能正常运行，系统必须从内存中调出一页程序或数据送磁盘的对换区中。但应将哪个页面调出，须根据一定的算法来确定。通常，把选择换出页面的算法称为页面置换算法(Page-Replacement Algorithms)。置换算法的好坏，将直接影响到系统的性能。

## 实验目的

分别采用

* 最佳(Optimal)置换算法

* 先进先出(FIFO)页面置换算法

* 最近最少使用(LRU)置换算法

对用户输入的页面号请求序列进行淘汰和置换，从而加深对页面置换算法的理解。

## 实验内容和要求

用C/C++语言编一个页面置换算法模拟程序。

用户通过键盘输入

* 分配的物理内存总块数

* 用户逻辑页面号请求序列

* 分别采用下列算法按照输出格式输出每次页面请求后各物理块内存放的虚页号

    * 最佳(Optimal)置换算法；
    
    * 先进先出(FIFO)页面置换算法
    
    * 最近最少使用(LRU)置换算法
   
* 算出每种算法的缺页次数。

```
输出格式：
7   0   1   2   0   3   0   4   2   3   0   3   2   1   2   0   1   7   0   1
+-+ +-+ +-+ +-+     +-+     +-+         +-+         +-+             +-+
|7| |7| |7| |2|     |2|     |2|         |2|         |2|             |7|
+-+ +-+ +-+ +-+     +-+     +-+         +-+         +-+             +-+
| | |0| |0| |0|     |0|     |4|         |0|         |0|             |0|
+-+ +-+ +-+ +-+     +-+     +-+         +-+         +-+             +-+
| | | | |1| |1|     |3|     |3|         |3|         |1|             |1|
+-+ +-+ +-+ +-+     +-+     +-+         +-+         +-+             +-+
```

## 算法思路

### 最佳(Optimal)置换算法

* 初始化时先获取完整的请求序列
* 每次响应请求时获取当前请求，维护请求序列，移除序列中当前请求之前的请求
* 置换时
    * 初始化一个所有块的链接列表
    * 初始化一个空的用于返回经置换的块的指针
    * 从下一个请求（来自于算法初始化时获得的请求序列）开始遍历所有未来请求
        * 若块链接列表只包含1个链接，则将该链接写入用于置换及返回的块指针，并中断遍历
        * 若
        * 通过块链接列表遍历所有块
            * 若块中页面编号与上以及遍历的请求页面编号相等，则从块链接列表中移除该链接，并中断遍历
        *